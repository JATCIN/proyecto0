{% extends 'layout.html' %}

{% block title %}Listado de Transferencias{% endblock %}

{% block content %}
<div class="container">
  <h2 class="mt-4">listado de Transferencias</h2>
  <!-- Botón de exportación a PDF -->
  <div class="d-flex justify-content-end mb-3">
    <a href="{{ url_for('export_pdf') }}" class="btn btn-secondary">Exportar a PDF</a>
</div>

  <table class="table table-dark" style="transform: translateX(-170px);">
    <thead>
      <tr>
        <th>ID transferencia</th>
        <th>Usuario</th>
        <th>Email</th>
        <th>Banco origen</th>
        <th>Cuenta origen</th>
        <th>Banco destino</th>
        <th>Cuenta destino</th>
        <th>Monto</th>
        <th>Tipo de cambio</th>
        <th>Comisión</th>
        <th>Fecha</th>
        <th>ID pacto asignado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
        {% for record in records %}
      <tr>
        <td>{{ record.id }}</td>
        <td>{{ record.fullname }}</td>
        <td>{{ record.email }}</td>
        <td>{{ record.origin_bank }}</td>
        <td>{{ record.origin_account }}</td>
        <td>{{ record.destination_bank }}</td>
        <td>{{ record.destination_account }}</td>
        <td>{{ record.amount }}</td>
        <td>{{ record.exchange_rate }}</td>
        <td>{{ record.commission }}</td>
        <td>{{ record.created_at }}</td>
        <td>{{ record.pacto_id }}</td>
        <td>
            <div class="btn-group" role="group" aria-label="Editar y eliminar">
                <form action="{{ url_for('delete_transfer', record_id=record.id) }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('¿Estás seguro de que deseas eliminar esta transferencia?');">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </form>
            </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}